<html>
    <head>
        <script>
            async function fetchAlbumsJSON() {
                const response = await fetch("http://localhost:8080/v1/albums");

                if (!response.ok) {
                    const message = 'An error has occured: ${response.status}';
                    throw new Error(message);
                }

                const albums = await response.json();
                return albums;
            }
            
            function getAlbums() {
                fetchAlbumsJSON().then(data => {
                    addTable(data[0]);
                    console.log(data);
                }).catch(error => {
                    alert(error.message);
                });
            }

            function addTable(text) {
                var table_json = document.getElementById("table_json");
                table_json.innerText = text.id;
                table_json.innerText = text.title;
                table_json.innerText = text.artist;

            }
        </script>
    </head>
    <body>
        <button onclick="getAlbums()">Test get albums</button>
         <table>
    {{ range $album := .albums }}
        <tr>
            <td>{{ .ID }}</td>
            <td>{{ .Title }}</td>
            <td>{{ .Artist }}</td>
            <td>{{ .Price }}</td>
        </tr>
    {{ end }}
    </table>

    <div id="table_json"></div>
    </body>
</html>